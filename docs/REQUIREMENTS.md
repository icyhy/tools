# 软件需求规格说明书 (SRS) v1.1

## 1. 项目概述
本项目旨在为企业内部培训开发一套局域网互动系统。该系统利用大屏幕投屏（PC端）与移动端（手机）的实时交互，提升培训过程中的参与感和趣味性。系统核心特点是**轻量级部署**与**高度可扩展的互动插件架构**。

## 2. 技术栈 (拟定)
*   **后端**: ASP.NET Core 8.0 (C#) - 提供API接口、静态文件服务与插件加载器。
*   **实时通信**: SignalR - 实现大屏与手机端的毫秒级数据同步。
*   **前端 (大屏/后台)**: Vue.js 3 (SPA) - 适配PC分辨率。
*   **前端 (移动端)**: Vue.js 3 (H5) - 响应式布局。
*   **互动插件**: HTML/JS/CSS + Markdown - 基于文件系统的动态加载模式。
*   **数据库**: SQLite - 单文件数据库，方便单机运行与数据迁移。
*   **部署**: Windows 桌面应用 (封装 Kestrel) 或 Docker 容器。

## 3. 用户角色
| 角色 | 描述 | 关键权限 |
| :--- | :--- | :--- |
| **管理员** | 负责系统的整体配置与数据管理 | 创建培训、配置互动环节、导出数据、重置系统。 |
| **主持人** | 培训现场的控场人员 | 手机端控制大屏流程、查看实时参与情况、开启/结束互动。 |
| **参会人** | 参加培训的普通用户 | 手机扫码签到、参与大屏互动、查看个人状态。 |

## 4. 功能需求

### 4.1 签到系统
*   **大屏端**: 显示动态二维码、实时签到人数、头像墙、WiFi指引。
*   **移动端**:
    *   新用户扫码输入姓名/部门注册（单次活动有效）。
    *   老用户（同一浏览器）自动识别。
    *   **主持人入口**: 输入密码认证后切换身份。

### 4.2 互动系统 (核心升级：插件化架构)
互动功能采用**插件化设计**，支持灵活扩展。系统不硬编码具体的互动类型，而是通过扫描指定目录加载互动模块。

#### 4.2.1 互动插件结构
每一类互动内容对应磁盘上的一个**子文件夹**（例如 `/Plugins/Interactions/RaceGame/`），包含：
1.  **Frontend Pages (`index.html` / `.vue` / `.jsx`)**: 互动的前端展示逻辑（大屏端与手机端）。
2.  **Logic Scripts (`logic.js`)**: 控制互动的核心逻辑（如倒计时、计分规则）。
3.  **Meta Info (`config.md` / `README.md`)**:
    *   使用 Markdown 的 Front Matter (YAML) 或正文定义配置元数据。
    *   包含：互动名称、图标路径、默认时长、参数说明等。
    *   正文部分可作为该互动的帮助文档或规则说明。
4.  **Assets (`images/`, `styles/`)**: 该互动独有的图片、音频与样式文件。

#### 4.2.2 核心互动类型 (MVP范例)
基于上述架构，初始内置以下插件：
1.  **找数字规律**:
    *   大屏端先显示0~100个数字随机分布显示的数字云，其中随机丢失一部分数字。
    *   用户在手机端可填写丢失的数字。后台统计用户正确率及查找完成率；倒计时30秒后大屏显示统计结果；
    *   大屏端再次显示显示0~100个数字随机分布显示的数字，其中随机丢失一部分数字，不过大屏被分成了4象限，数字按顺序从第一象限、第二象限、第三象限、第四象限、再回到第一象限的顺序分配。然后用户再次在手机端填写丢失的数字。后台统计用户正确率及查找完成率；倒计时30秒后大屏显示统计结果；
    *   最后大屏端再次显示显示0~100个数字随机分布显示的数字，但以行的方式显示，每行数字按顺序从小到大排列；然后用户再次在手机端填写丢失的数字。后台统计用户正确率及查找完成率；倒计时30秒后大屏显示统计结果；
2.  **现场问答 (Q&A)**:
    *   Markdown 文件定义题库（题目、选项、答案）。
    *   大屏显示当前题目，手机端显示选项。
3.  **投票/表决**:
    *   支持动态配置选项。
    *   大屏实时显示票数统计图表。

#### 4.2.3 控制逻辑
*   **热加载**: 管理员在文件夹中添加新插件后，无需重启服务，刷新后台即可识别。
*   **状态同步**: 插件通过统一的 SignalR 通道与后端通信，广播状态（如 `GameStart`, `GameEnd`, `UpdateScore`）。

### 4.3 导航功能
*   **移动端**: 提供“会议议程”或“活动指南”Tab页。
*   **内容**: 读取系统配置的 Markdown 文件或静态图片进行展示。

### 4.4 配置与管理 (管理员)
*   **培训管理**: 创建/重置培训，无需复杂配置。
*   **插件管理**: 自动扫描插件目录，管理员可勾选本次培训启用的互动插件，并配置参数（如时长、题目）。
*   **数据导出**: 导出 Excel 格式的签到与互动数据。

## 5. 非功能需求
*   **性能**: 支持 200 人并发，低延迟。
*   **易用性**: “解压即用”，无复杂安装过程。
*   **扩展性**: **极高**。前端开发人员只需按照规范编写 HTML/JS/MD 放入文件夹即可增加新玩法。

## 6. 约束与确认 (已更新)
*   [x] **单场次**: 不需要支持多场培训同时进行。
*   [x] **无外部账号**: 不对接企业微信/钉钉，使用临时会话ID。
*   [x] **单屏显示**: 不需要支持多屏幕扩展。
*   [x] **中文界面**: 全程中文支持。
