<div class="vote-plugin-user" style="max-width: 600px; margin: 0 auto; padding: 20px;">
    <h3 style="text-align: center; color: #444; margin-bottom: 30px; font-size: 1.5rem;">{{ config.question }}</h3>
    <div id="vote-options" style="display: flex; flex-direction: column; gap: 12px;">
        {% for option in config.options %}
        <button class="btn vote-option" data-value="{{ option }}" style="padding: 15px; font-size: 1.1rem; border-radius: 8px; 
                       background-color: #fff; color: #333; border: 1px solid #ddd; 
                       cursor: pointer; transition: all 0.2s;"
            onmouseover="this.style.backgroundColor='#f8f9fa'; this.style.borderColor='#4a90e2'"
            onmouseout="if(!this.classList.contains('selected')) { this.style.backgroundColor='#fff'; this.style.borderColor='#ddd' }"
            onclick="submitVote('{{ option }}', this)">
            {{ option }}
        </button>
        {% endfor %}
    </div>
    <p id="status-message" style="text-align: center; margin-top: 20px; color: #666;"></p>
</div>

<script>
    async function submitVote(value, btnElement) {
        try {
            const response = await fetch('/api/plugin/{{ interaction_id }}/submit', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify({ value: value })
            });

            if (response.ok) {
                // Visual feedback
                const btns = document.querySelectorAll('.vote-option');
                btns.forEach(b => {
                    b.classList.remove('selected');
                    b.disabled = true;
                    b.style.opacity = 0.5;
                });
                btnElement.classList.add('selected');
                btnElement.style.backgroundColor = "#28a745";
                btnElement.style.color = "#fff";
                btnElement.style.borderColor = "#28a745";
                btnElement.style.opacity = 1;

                document.getElementById('status-message').innerText = "✓ 投票成功!";
                document.getElementById('status-message').style.color = "#28a745";
            } else {
                document.getElementById('status-message').innerText = "✗ 提交失败,请重试";
                document.getElementById('status-message').style.color = "#dc3545";
            }
        } catch (e) {
            console.error(e);
            document.getElementById('status-message').innerText = "✗ 网络错误";
            document.getElementById('status-message').style.color = "#dc3545";
        }
    }
</script>