{% extends "base.html" %}

{% block title %}签到{% endblock %}

{% block content %}
<div class="mobile-page">
    <div class="mobile-card">
        {% if error %}
        <div style="color: red; margin-bottom: 10px; text-align: center;">{{ error }}</div>
        {% endif %}

        <h2 style="text-align: center;">培训签到</h2>
        
        <form action="/api/signin" method="post">
            <div class="form-group">
                <label>姓名</label>
                <input type="text" name="name" required placeholder="请输入您的姓名">
            </div>
            
            <div class="form-group">
                <label>部门 (选填)</label>
                <input type="text" name="department" placeholder="请输入您的部门">
            </div>
            
            <div class="form-group">
                <label>角色</label>
                <select name="role" id="role-select" onchange="toggleHostPassword()" style="width: 100%; padding: 10px;">
                    <option value="user">普通用户</option>
                    <option value="host">主持人</option>
                </select>
            </div>
            
            <div class="form-group" id="host-password-group" style="display: none;">
                <label>主持人密码</label>
                <input type="password" name="host_password" placeholder="请输入主持人密码">
            </div>
            
            <button type="submit" class="btn">签到进入</button>
        </form>
    </div>
</div>

<script>
    function toggleHostPassword() {
        const role = document.getElementById('role-select').value;
        const group = document.getElementById('host-password-group');
        const input = document.querySelector('input[name="host_password"]');
        if (role === 'host') {
            group.style.display = 'block';
            input.required = true;
        } else {
            group.style.display = 'none';
            input.required = false;
        }
    }
</script>
{% endblock %}
